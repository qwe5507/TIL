
### RDS란?
- https://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/UserGuide/Welcome.html
- AWS에서 관계형 데이터베이스를 쉽게 사용할 수 있게 도와주는 서비스
- 관계형 데이터베이스의 관리의 부담을 줄여주지만, 추가적인 비용이 발생한다.

### RDS에서 지원하는 RDB
- Oracle
- MySQL
- MariaDB
- Aurora
- PostgreSQL
- SQL Server

### RDS 사용해야 하는 이유
- 쉬운 백업과 복구
- 고가용성 확보
- 수직 확장 수평 확장시 다운타임 최소화
- AWS 타 서비스들과의 통합 관리
- 다양한 기능
- 높은 성능

### RDS 사용하지 말아야 하는 이유
- 비용이 비쌈
  - 일반적으로 ec2의 2배 
    - 고가용성을 위해 이중화 하면 ec2한대의 가격보다 4배가 든다.
- 완전 최적화는 어렵다.
  - AWS에서 제공하는 기능이기 때문에, 커스텀 하기 어려움
- 특정 벤더들의 경우 벤더사의 클라우트 제품이 더 유리할 수 있다.

### RDS 생성 사전작업
- Admin 권한 필요 
  - IAM 권한이 필요한 경우가 많다.
  - ADMIN권한이 있는 IAM Role을 부여 받을 수 있는 IAM 계정이나 ADMIN 계정이 필요
- DB 서브넷 그룹 생성
  - `DB 서브넷 그룹 : 두 개 이상의 서브넷의 집합`
  - 서로 다른 두 개 이상의 AZ필요
    - 고가용성(HA)을 위해
  - 주로 pricate subnet에 생성
- DB용 보안 그룹 생성 
  - 3306 포트 ALLOW
  - 일반적으로 public subnet의 인바운트 트래픽을 열어 public존의 인스턴스에서만 접근하게 한다.

### RDS 생성
- Admin 권한이 필요한 경우가 많음.
- 생성 시 다양한 설정 가능, 생성 후 수정 불가능한 항목도 있음.
- DB 서브넷 : RDS가 위치하는 서브넷 설정, 최소 두개의 AZ 필요
- `자동 백업 기간` : point-in-time recovery 기간 설정 
  - 헷갈리기 쉬운 부분으로 `백업 보존 기간`이 7일 이면 7일만 보관하는게 아닌, RDS는 항상 백업을 하고 7일 이내로 `point-in-time recovery` 즉, 복구 할 수 있다는 뜻
- `백원 윈도우` : 특정 시간에만 백업하도록 지정
- `유지보수 윈도우`  : 특정 시간에만 업데이트 패치등을 수행함
  - 특정 기간 or 즉시 적용
- 스토리지 자동 조정
  - 스토리지 용량 초과 시 자동으로 스토리지의 용량이 추가 된다.
  - 운영환경에서는 거의 활성화
- 보안 그룹 설정
- 모니터링 
  - Enhanced 모니터링 활성화 
  - 추가 비용이 붙지만, 유용하므로 왠만하면 사용을 추천

### RDS 연결 
- 일반적으로 외부연결 허용 x
- 일반적으로 점프 서버등을 통해 접속
  - private에 존재하는 DB에 접근하기 위해, public의 ec2를 거쳐서 접근, DMZ Zone
- IDE를 통해 연결할 경우 SSH 터널링을 사용

### RDS 수직 확장 및 축소
- 수직 확장 / 축소 => Scaling Up / Down 
- 서버의 성능을 높이거나 줄이는 방법 (CPU, memory, Disk, 네트워크 대역폭 등) 
- RDS는 거의 다운타임 없이 수직 확장 및 축소 가능 
- 지정된 유지보수 기간 또는 즉시 반영 중 선택 가능

### RDS 수평 확장 - 읽기 복제본 추가
- 수평 확장: Scaling Out <-> Scaling In 
- 여러 대의 서버를 이용해서 성능을 높이는 방법 
- NoSQL 들은 좀 더 유연한 수평확장이 가능한 경우가 많다. 
- 읽기 복제본 또는 샤딩과 같은 기술이 대표적 
- 개발자의 추가적인 개발비용이 발생 
  - `읽기 복제본 생성 시 읽기 복제본의 엔드포인트가 원본과 다르게 생성된다.`
    - 프록시를 통해 해결 가능.
- Oracle이나 SQL Server 처럼 RDBMS 자체적으로 지원해 주는 경우도 있다.
